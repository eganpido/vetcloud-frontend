<div class="grid p-2">
    <div class="col-12 lg:col-5">
        <div class="card p-3 md:p-4 shadow-2 bg-white border-round-xl h-full">
            <div class="flex align-items-center justify-content-between mb-4">
                <div class="flex flex-column">
                    <h2 class="m-0 font-bold text-primary text-xl md:text-2xl">Customer Profile</h2>
                    <p-skeleton *ngIf="loading" width="12rem" height="1rem" styleClass="mt-2"></p-skeleton>
                    <p *ngIf="!loading" class="text-500 m-0 text-sm hidden sm:block">Manage information and security.
                    </p>
                </div>

                <p-skeleton *ngIf="loading" width="6rem" height="2rem" borderRadius="16px"></p-skeleton>
                <p-tag *ngIf="!loading" [value]="customer.isLocked ? 'Active' : 'Inactive'"
                    [severity]="customer.isLocked ? 'success' : 'danger'">
                </p-tag>
            </div>

            <div class="grid p-fluid">
                <div class="col-12 md:col-4 mb-2">
                    <label class="block font-semibold mb-2 text-700">Code</label>
                    <p-skeleton *ngIf="loading" height="2.5rem"></p-skeleton>
                    <p-icon-field *ngIf="!loading" iconPosition="left">
                        <p-inputicon class="pi pi-tag"></p-inputicon>
                        <input pInputText [(ngModel)]="customer.code" [disabled]="customer.isLocked"
                            placeholder="C000001" class="w-full" />
                    </p-icon-field>
                </div>

                <div class="col-12 md:col-8 mb-2">
                    <label class="block font-semibold mb-2 text-700">Full Name</label>
                    <p-skeleton *ngIf="loading" height="2.5rem"></p-skeleton>
                    <p-icon-field *ngIf="!loading" iconPosition="left">
                        <p-inputicon class="pi pi-user"></p-inputicon>
                        <input pInputText [(ngModel)]="customer.customerName" [disabled]="customer.isLocked"
                            placeholder="John Doe" class="w-full" />
                    </p-icon-field>
                </div>

                <div class="col-12 mb-2">
                    <label class="block font-semibold mb-2 text-700">Contact Number</label>
                    <p-skeleton *ngIf="loading" height="2.5rem"></p-skeleton>
                    <p-icon-field *ngIf="!loading" iconPosition="left">
                        <p-inputicon class="pi pi-phone"></p-inputicon>
                        <input pInputText [(ngModel)]="customer.contactNumber" [disabled]="customer.isLocked"
                            placeholder="0912 345 6789" class="w-full" />
                    </p-icon-field>
                </div>

                <div class="col-12 mb-2">
                    <label class="block font-semibold mb-2 text-700">Address</label>

                    <p-skeleton *ngIf="loading" height="5rem"></p-skeleton>

                    <p-icon-field *ngIf="!loading" iconPosition="left" class="textarea-icon-top">
                        <p-inputicon class="pi pi-map-marker"></p-inputicon>
                        <textarea pTextarea rows="3" [(ngModel)]="customer.customerAdress"
                            [disabled]="customer.isLocked" [autoResize]="true"
                            placeholder="House No., Street, Brgy, City, Province" class="w-full">
                        </textarea>
                    </p-icon-field>
                </div>
            </div>

            <div class="col-12 mt-3 pt-3 border-top-1 border-gray-100">
                <div class="grid p-fluid">
                    <div class="col-12 md:col-6 mb-2">
                        <label class="block text-xs font-semibold mb-1 text-500 uppercase">Created By</label>
                        <p-skeleton *ngIf="loading" width="80%" height="1rem"></p-skeleton>
                        <div *ngIf="!loading" class="flex align-items-center text-600 text-sm">
                            <i class="pi pi-user-plus mr-2 text-xs"></i>
                            <span>{{ customer.createdById?.fullname || 'N/A' }}</span>
                            <span class="mx-2">|</span>
                            <span class="text-xs">{{ customer.createdDateTime | date:'medium' }}</span>
                        </div>
                    </div>

                    <div class="col-12 md:col-6 mb-2">
                        <label class="block text-xs font-semibold mb-1 text-500 uppercase">Last Updated By</label>
                        <p-skeleton *ngIf="loading" width="80%" height="1rem"></p-skeleton>
                        <div *ngIf="!loading" class="flex align-items-center text-600 text-sm">
                            <i class="pi pi-pencil mr-2 text-xs"></i>
                            <span>{{ customer.updatedById?.fullname || 'N/A' }}</span>
                            <span class="mx-2">|</span>
                            <span class="text-xs">{{ customer.updatedDateTime | date:'medium' }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="flex flex-column sm:flex-row justify-content-between mt-4 pt-4 border-top-1 border-gray-100 gap-3">
                <p-skeleton *ngIf="loading" width="8rem" height="2.5rem"></p-skeleton>
                <div *ngIf="loading" class="flex flex-column sm:flex-row gap-2">
                    <p-skeleton width="6rem" height="2.5rem"></p-skeleton>
                    <p-skeleton width="6rem" height="2.5rem"></p-skeleton>
                    <p-skeleton width="6rem" height="2.5rem"></p-skeleton>
                </div>

                <p-button *ngIf="!loading" label="Save" icon="pi pi-save" (onClick)="save()"
                    [disabled]="customer.isLocked" styleClass="p-button-success w-full sm:w-auto"></p-button>
                <div *ngIf="!loading" class="flex flex-column sm:flex-row gap-2">
                    <p-button label="Lock" icon="pi pi-lock" (onClick)="lock()" severity="primary"
                        [disabled]="customer.isLocked" styleClass="w-full sm:w-auto"></p-button>

                    <p-button label="Unlock" icon="pi pi-lock-open" (onClick)="unlock()" severity="primary"
                        [disabled]="!customer.isLocked" styleClass="w-full sm:w-auto"></p-button>

                    <p-button label="Back" icon="pi pi-list" (onClick)="back()" severity="danger"
                        styleClass="w-full sm:w-auto"></p-button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 lg:col-7">
        <div class="card p-3 md:p-4 shadow-2 bg-white border-round-xl h-full flex flex-column">
            <div class="flex-grow-1 border-2 border-dashed border-gray-200 border-round p-3 overflow-auto w-full"
                style="min-height: 400px;">

                <div *ngIf="loading" class="flex flex-column gap-3">
                    <p-skeleton width="100%" height="150px" borderRadius="12px"></p-skeleton>
                </div>

                <div *ngIf="!loading">
                    <ng-container *ngIf="customer?.customerId; else noCustomerTemplate">
                        <app-pet-list [customerId]="customer.customerId">
                        </app-pet-list>
                    </ng-container>

                    <ng-template #noCustomerTemplate>
                        <div
                            class="flex flex-column align-items-center justify-content-center w-full min-h-20rem py-8 fadein">
                            <div class="relative flex align-items-center justify-content-center mb-4">
                                <div class="absolute border-circle bg-primary-50 w-8rem h-8rem opacity-50"></div>
                                <i
                                    class="pi pi-user-plus text-primary text-6xl shadow-2 border-circle bg-white p-3"></i>
                            </div>

                            <div class="text-center px-4">
                                <h3 class="text-600 font-semibold text-2xl mb-2">No Customer Profile Selected</h3>
                                <p class="text-600 line-height-3 m-0 max-w-25rem">
                                    <span class="text-500 text-sm italic">Please save/lock this customer record to
                                        manage
                                        their pet(s).</span>
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
</div>